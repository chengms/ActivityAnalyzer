# 快速测试指南

## 🚀 启动应用

### 1. 安装依赖（如果还没安装）
```bash
npm install
```

### 2. 启动开发模式
```bash
npm run dev
```

这将同时启动：
- TypeScript 编译器（监听模式）
- Vite 开发服务器（前端）
- Electron 应用

---

## ✅ 功能测试步骤

### 测试 1: 基础功能
1. **应用启动**
   - ✅ 应用窗口正常显示
   - ✅ 顶部显示"活动分析器"标题
   - ✅ 有日期选择器、设置按钮、生成报告按钮

2. **活动追踪**
   - 切换不同的应用（如浏览器、编辑器等）
   - 等待几秒钟
   - 选择今天的日期
   - ✅ 应该能看到活动记录

### 测试 2: 系统托盘
1. **查看托盘图标**
   - ✅ 系统托盘（任务栏右下角）应该显示应用图标
   - 如果没有图标，这是正常的（需要添加图标文件）

2. **右键菜单**
   - 右键点击托盘图标
   - ✅ 应该看到菜单：显示窗口、设置、退出

3. **双击托盘图标**
   - 双击托盘图标
   - ✅ 应该显示/激活主窗口

4. **关闭到托盘**
   - 打开设置，启用"关闭到托盘"
   - 保存设置
   - 关闭主窗口（点击 X）
   - ✅ 窗口关闭，但应用仍在运行（托盘图标仍在）
   - 双击托盘图标，窗口应该重新显示

### 测试 3: 设置功能
1. **打开设置**
   - 点击顶部工具栏的 ⚙️ 按钮
   - ✅ 设置面板应该弹出

2. **检测间隔设置**
   - 拖动滑块或输入数值
   - 将间隔设置为 10 秒
   - 点击"保存"
   - ✅ 看到"设置已保存"提示
   - 切换应用，等待 10 秒
   - ✅ 应该按 10 秒间隔记录活动

3. **开机自启动**
   - 启用"开机自启动"开关
   - 点击"保存"
   - ✅ 设置保存成功
   - 注意：需要重启电脑才能验证自启动功能

4. **窗口行为设置**
   - 启用"最小化到托盘"
   - 启用"关闭到托盘"
   - 保存设置
   - 测试最小化和关闭功能
   - ✅ 行为应该符合设置

### 测试 4: 数据展示
1. **查看今天的数据**
   - 选择今天的日期
   - ✅ 汇总卡片显示数据
   - ✅ 饼图显示应用分布
   - ✅ 应用排行列表显示
   - ✅ 活动时间线显示

2. **切换日期**
   - 选择不同的日期
   - ✅ 数据正确更新

### 测试 5: 报告生成
1. **生成报告**
   - 选择有数据的日期
   - 点击"生成报告"按钮
   - ✅ 显示成功消息
   - ✅ 报告文件路径显示

2. **查看报告文件**
   - 根据提示的路径找到文件
   - ✅ Excel 文件存在
   - ✅ HTML 文件存在
   - 打开文件，检查内容
   - ✅ 数据完整准确

---

## 🐛 常见问题排查

### 问题 1: 应用无法启动
- 检查是否安装了所有依赖：`npm install`
- 检查 Node.js 版本（建议 18+）
- 查看控制台错误信息

### 问题 2: 托盘图标不显示
- 这是正常的，需要添加图标文件到 `assets/icon.png`
- 应用仍能正常工作，只是图标可能显示为空白

### 问题 3: 活动追踪不工作
- 检查是否在 Windows 系统上运行
- 检查 PowerShell 是否可用
- 查看控制台是否有错误信息

### 问题 4: 设置保存失败
- 检查应用是否有写入权限
- 查看控制台错误信息
- 检查 `{userData}/settings.json` 文件

### 问题 5: 开机自启动不工作
- 检查是否以管理员权限运行（某些情况下需要）
- 手动检查注册表：`HKCU\Software\Microsoft\Windows\CurrentVersion\Run`
- 查看控制台是否有错误信息

---

## 📊 测试检查清单

使用以下清单确保所有功能正常：

- [ ] 应用能正常启动
- [ ] 主窗口正常显示
- [ ] 活动追踪正常工作
- [ ] 数据正确保存和显示
- [ ] 系统托盘图标显示（或至少应用在后台运行）
- [ ] 托盘右键菜单正常
- [ ] 双击托盘图标显示窗口
- [ ] 设置面板能正常打开
- [ ] 检测间隔设置能保存和生效
- [ ] 开机自启动设置能保存
- [ ] 窗口行为设置生效
- [ ] 数据展示正常
- [ ] 报告生成正常

---

## 🎯 下一步

测试完成后：
1. 如果发现问题，记录错误信息
2. 检查控制台日志
3. 查看 `TEST_CHECKLIST.md` 获取更详细的测试项

